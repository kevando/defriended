<!DOCTYPE html>
<html lang="en">
<head>
	<title>dddefriended.com (bitch!)</title>
	<meta name="description" content="YOU JUST GOT DEFRIENDED">
	<meta name="keywords" content="how to defriend someone on facebook">
	<meta name="author" content="Kevando">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- add more of this shit, get it perfect -->
	<meta property="og:title" content="ddefriended" />

<style>

h1{font-size:9em;font-family:impact}
img{display:none}

.title{	width: 100%;text-align: center;}
.title h1 span{display:none;}
#popo{position:absolute;bottom:0px;right:0px;opacity:0.0;cursor:pointer;}
#reply{position:absolute;bottom:0px;left:0px;}
</style>


</head>
<body>
<div class="container">
	
	<div class="title">
		<h1 id="title-text"><span>D-</span><span>D-</span><span>DE-</span><span>FRI</span><span>EN</span><span>DEDD</span></h1>
	</div>
</div>

<div id="loading-sound">Loading Audio...</div>

<img id="popo" onClick="clearInterval(flashingTitle);"/>

<button onclick="replay();" id="reply" style="display:none;">Replay</button>

<script type="text/javascript">

// Immediately load audio clip, wait 750ms before playing it
function loadSound(callback){
	
	audioSrc = 'http://166.78.112.133/img/d3_friended_take3.mp3';
	//audioSrc = 'sound/d3_friended_take3.mp3';
	sound = document.createElement("audio");
	sound.src = audioSrc;
	sound.muted=false;
	
	setTimeout(function(){
		sound.addEventListener('canplaythrough',playSound(sound), false); // dont think this actually works
	},750);
}

// After mp3 is loaded, play it and display title
function playSound(audio){
	document.getElementById('loading-sound').style.display = 'none';
	audio.play();
	displayTitle();
}

// display title in sync with the clip
function displayTitle(){	
	var title = document.getElementById("title-text");
	setTimeout(function(){title.childNodes[0].style.display="inline";},1250);
	setTimeout(function(){title.childNodes[1].style.display="inline";},1350);
	setTimeout(function(){title.childNodes[2].style.display="inline";},1450);
	setTimeout(function(){title.childNodes[3].style.display="inline";},1650);
	setTimeout(function(){title.childNodes[4].style.display="inline";},1750);
	setTimeout(function(){title.childNodes[5].style.display="inline";},1950);
	
	setTimeout(function(){
		flashTitle();	
	},4050);
}

// about 5 seconds in, flash title, set bg black, fade in pogo
function flashTitle(){
	flashingTitle = setInterval(function(){
		var color = '#'+Math.floor(Math.random()*16777215).toString(16);
		document.getElementById("title-text").style.color = color;
	},200);
	
	setTimeout(function(){		
		flashBackground();
	},5050);
}

// about 3seconds in flash bg
function flashBackground(){
	
	flashingBackground = setInterval(function(){
		var color = '#'+Math.floor(Math.random()*16777215).toString(16);
		document.getElementsByTagName("body")[0].style.background = color;
	},200);
	
	setTimeout(function(){
		clearInterval(flashingBackground);
		document.getElementsByTagName("body")[0].style.background = "#000";
		fadeInImage();
		
	},7050);
}



function fadeInImage(){
	firstImage = document.getElementById('popo');
	firstImage.src = "img/popo.jpg";
	firstImage.onload  = function(){                               
	                firstImage.style.display="inline";
	        }
	var opacity = 0.0;
	imageFade = setInterval(function(){
		opacity = opacity + 0.1;
		firstImage.style.opacity = opacity;
	},200);
	
	setTimeout(function(){
		clearInterval(imageFade);
		document.getElementById('reply').style.display="inline";
	},4050);
}

/* Initialize everything!! */
loadSound("fresh",function(){
	console.log('async');
});


function replay(){
	document.getElementsByTagName("body")[0].style.background = "#FFF";
	var title = document.getElementById("title-text");
	title.childNodes[0].style.display="none";
	title.childNodes[1].style.display="none";
	title.childNodes[2].style.display="none";
	title.childNodes[3].style.display="none";
	title.childNodes[4].style.display="none";
	title.childNodes[5].style.display="none";
	clearInterval(flashingTitle);
	document.getElementById('popo').style.display="none";
	document.getElementById('popo').style.opacity=0.0;
	document.getElementById('reply').style.display="none";
	console.log('everything cleared');

	setTimeout(function(){
		loadSound();	
	},1000);
}


</script>

</body>
</html>